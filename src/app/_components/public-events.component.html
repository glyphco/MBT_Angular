<div class="container white">
<p>&nbsp;</p>

<h4>Events near {{location}}</h4>
<br />
<div *ngIf="loadingIndicatorVisible" class="loading-container"><i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i></div>
<div *ngFor="let event of events; trackBy: trackEvent" class="row event-venue-container">
  <div class="col-md-2 col-sm-2 event-details-container image-time clearfix">
    <img class="event-image img-responsive center-block" src="{{ event.imageurl }}">
    <div class="date-container visible-xs-inline-block">
      <span class="month">{{ event.local_start | dateFormatter:'MMMM' }}</span>
      <span class="date">{{ event.local_start | dateFormatter:'D' }}</span>
      <span class="day">{{ event.local_start | dateFormatter:'dddd' }}</span>
    </div>
  </div>
  <div class="col-md-7 col-sm-7 xs-row">
    <div class="row event-details-container">
      <div class="col-md-2 col-sm-2 hidden-xs alpha omega date-container">
        <span class="month">{{ event.local_start | dateFormatter:'MMMM' }}</span>
        <span class="date">{{ event.local_start | dateFormatter:'D' }}</span>
        <span class="day">{{ event.local_start | dateFormatter:'dddd' }}</span>
      </div>
      <div class="col-md-10 col-sm-10 info-container">
        <p class="event-title"><strong><a [routerLink]="['/event',event.id]">{{ event.name }}</a></strong> <a [routerLink]="['/event/full', event.id]"><button class="btn btn-primary">View all details</button></a></p>
        <p class="venue-name">
          <a *ngIf="event.venue_id; else elseBlock" [routerLink]="['/venue',event.venue_id]">{{ event.venue_name }}</a>
          <ng-template #elseBlock>{{ event.venue_name }}</ng-template>
        </p>
        <p class="event-times">
          <strong>{{ event.local_start | dateFormatter:'h:mm A' }}</strong> to <strong>{{ event.local_end | dateFormatter:'h:mm A' }}</strong>
        </p>
        <span><strong>{{ event.categories.length > 0 ? event.categories[0].subcategory.name : '' }}</strong> $20 - $40</span>
      </div>
    </div>
    <div class="row event-details-container">
      <div class="col-md-12">
        <p class="event-description">
          {{ event.description | truncate : [200 ,'...'] }}<br />
        </p>
      </div>
    </div>
  </div>
  <div class="col-md-3 col-sm-3 alpha omega participants-container">
    <div class="participants-header"><strong>Participants</strong></div>
    <div class="scroll-container scrollbar">
      <div *ngFor="let participant of event.eventparticipants" class="participant-container clearfix">
        <img *ngIf="participant.imageurl" class="pull-left" src="{{ participant.imageurl }}">
        <div class="participant">
          <p *ngIf="participant.page_id;else noLink" class="participant-name"><a [routerLink]="['/page', participant.page_id]">{{ participant.name }}</a></p>
          <ng-template #noLink>
            <p class="participant-name">{{ participant.name }}</p>
          </ng-template>
        </div>
      </div>
    </div>
  </div>
</div>
<p>&nbsp;</p>
<button *ngIf="pagination.totalPages > pagination.currentPage" class="btn btn-default center-block" (click)="loadNextPage()">Load more</button>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>